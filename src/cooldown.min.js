(function(e){var j={tickFrequency:50,arcWidth:10,arcColor:"#27ae60",arcBackgroundColor:"#d7d8d9",toFixed:1,introDuration:500,countdownCss:{width:"100%",height:"100%",margin:0,padding:0,textAlign:"center",fontSize:"16px"},countdownFn:null,completeFn:null},f=!1;try{-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(f=!0)}catch(k){}e.fn.cooldown=function(g){if(1<this.length){for(var h=[],d=0;d<this.length;d++)h.push(this.eq(d).cooldown(g));return h}var a=this;e.extend(!0,this,{_init:function(){this.sideLength=
Math.min(this.width(),this.height());return this},_tick:function(){this.remainingTime=this.duration*(1-this.buffer)-(new Date-this.timePing)/1E3;0>=this.remainingTime&&(this.state="stopped",clearInterval(this.interval),this.remainingTime=0,this.completeFn&&this.completeFn());this.remainingTimeElement.html(this.countdownFn?this.countdownFn(this.remainingTime):this.remainingTime.toFixed(this.toFixed));if(!f){var a=Math.PI/-2+2*(1-this.remainingTime/this.duration)*Math.PI,c=[this.sideLength/2,this.sideLength/
2,this.sideLength/2-this.arcWidth/2];this.canvasElement.width=this.canvasElement.width;this.context.lineWidth=this.arcWidth;this.context.strokeStyle=this.arcColor;this.context.beginPath();this.context.arc.apply(this.context,c.concat([Math.PI/-2,a]));this.context.stroke();this.context.strokeStyle=this.arcBackgroundColor;this.context.beginPath();this.context.arc.apply(this.context,c.concat([a,3*Math.PI/2]));this.context.stroke()}return this},_setActive:function(b){b?(this.interval=setInterval(function(){a._tick.apply(a)},
this.tickFrequency),this.svgElement&&this.svgElement.unpauseAnimations()):(clearInterval(this.interval),this.svgElement&&this.svgElement.pauseAnimations());return this},start:function(b){this.stop();this.duration=this.remainingTime=b;this.buffer=0;if(!("number"===typeof this.duration&&0<=this.duration))throw new SyntaxError("Invalid [duration]");if(f){b=this.sideLength/2-this.arcWidth/2;b=["M",this.sideLength/2,this.arcWidth/2,"a",b,b,0,1,0,0.01,0].join(" ");var c=Math.ceil(Math.PI*(this.sideLength-
this.arcWidth));this.html(["<svg style='position: absolute; top: 0; left: 0;'width='",this.sideLength,"' height='",this.sideLength,"'><path fill='none' stroke-dashoffset='",c,"' stroke-dasharray='",c,"' stroke='",this.arcBackgroundColor,"' stroke-width='",this.arcWidth,"' d='",b,"'><animate attributeName='stroke-dashoffset' from='",-c,"' to='0' dur='",this.introDuration/1E3,"' /><animate attributeName='stroke-dashoffset' from='0' to='",c,"' begin='",this.introDuration/1E3,"' dur='",this.duration,
"' /></path><path fill='none' stroke-opacity='0' stroke-dasharray='",c,"' stroke='",this.arcColor,"' stroke-width='",this.arcWidth,"' d='",b,"'><animate attributeName='stroke-dashoffset' from='",-c,"' to='0' begin='",this.introDuration/1E3,"' dur='",this.duration,"' /><animate attributeName='stroke-opacity' from='1' to='1' begin='",this.introDuration/1E3,"' dur='indefinite' /></path></svg>"].join(""));this.svgElement=this.find("svg")[0]}else{this.html(["<canvas style='position: absolute; top: 0; left: 0;' width='",
this.sideLength,"' height='",this.sideLength,"'></canvas>"].join(""));this.canvasElement=this.find("canvas")[0];this.context=this.canvasElement.getContext("2d");var d=new Date,e=setInterval(function(){var b=(new Date-d)/a.introDuration;1<b?clearInterval(e):(a.canvasElement.width=a.canvasElement.width,a.context.lineWidth=a.arcWidth,a.context.strokeStyle=a.arcBackgroundColor,a.context.beginPath(),a.context.arc(a.sideLength/2,a.sideLength/2,a.sideLength/2-a.arcWidth/2,Math.PI/-2,Math.PI/-2+2*Math.PI*
b),a.context.stroke())},this.tickFrequency)}this.css("position","relative").append(["<div class='remaining-time' style='line-height: ",this.sideLength,"px;'></div>"].join(""));this.remainingTimeElement=this.find(".remaining-time").css(this.countdownCss);setTimeout(function(){a.state="paused";a.remainingTimeElement.html(a.duration.toFixed(a.toFixed));a.resume.apply(a)},this.introDuration)},stop:function(){this.state="stopped";this._setActive(!1).empty()},pause:function(){"playing"===this.state&&(this.state=
"paused",this._setActive(!1)._tick(),this.buffer=1-this.remainingTime/this.duration)},resume:function(){"paused"===this.state&&(this.state="playing",this.timePing=new Date,this._setActive(!0))}},j,g);this._init();return{start:function(){return a.start.apply(a,arguments)},stop:function(){return a.stop.apply(a)},pause:function(){return a.pause.apply(a)},resume:function(){return a.resume.apply(a)}}}})(jQuery);
